<!DOCTYPE html>
<head>
    <meta charset="utf-8"/>
    <link rel="dns-prefetch preconnect" href="https://u.jimcdn.com/" crossorigin="anonymous"/>
    <link rel="dns-prefetch preconnect" href="https://assets.jimstatic.com/" crossorigin="anonymous"/>
    <link rel="dns-prefetch preconnect" href="https://image.jimcdn.com" crossorigin="anonymous"/>
    <link rel="dns-prefetch preconnect" href="https://fonts.jimstatic.com" crossorigin="anonymous"/>
    <link rel="dns-prefetch preconnect" href="https://www.google-analytics.com" crossorigin="anonymous"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="description" content=""/>
    <meta name="robots" content="index, follow, archive"/>
    <meta property="st:section" content=""/>
 
    <title>ESAS Deconstruction</title>
 


    <style>
    html, body {
        margin:0
    }

    .hidden {
        display:none
    }

    .n {
        padding:5px
    }

    #emotion-header {
        position:relative
    }

    #emotion-header-logo, #emotion-header-title {
        position: absolute
    }
    </style>

    <link href="https://u.jimcdn.com/cms/o/s1c71c378b473a4b7/layout/l18102fdb581481be/css/main.css?t=1678435519" rel="stylesheet" type="text/css" id="jimdo_main_css"/>
    <link href="https://u.jimcdn.com/cms/o/s1c71c378b473a4b7/layout/l18102fdb581481be/css/layout.css?t=1481798901" rel="stylesheet" type="text/css" id="jimdo_layout_css"/>
    <link href="https://u.jimcdn.com/cms/o/s1c71c378b473a4b7/layout/l18102fdb581481be/css/font.css?t=1678435519" rel="stylesheet" type="text/css" id="jimdo_font_css"/>
    <script>

      
    /* <![CDATA[ */
    /*!  loadCss [c]2014 @scottjehl, Filament Group, Inc.  Licensed MIT */
    window.loadCSS = window.loadCss = function(e, n, t) {
        var r,
            l = window.document,
            a = l.createElement("link");
        if (n)
            r = n;
        else {
            var i = (l.body || l.getElementsByTagName("head")[0]).childNodes;
            r = i[i.length - 1]
        }
        var o = l.styleSheets;
        a.rel = "stylesheet",
        a.href = e,
        a.media = "only x",
        r.parentNode.insertBefore(a, n ? r : r.nextSibling);
        var d = function(e) {
            for (var n = a.href, t = o.length; t--;)
                if (o[t].href === n)
                    return e.call(a);
            setTimeout(function() {
                d(e)
            })
        };
        return a.onloadcssdefined = d, d(function() {
            a.media = t || "all"
        }), a
    };
    window.onloadCSS = function(n, o) {
        n.onload = function() {
            n.onload = null,
            o && o.call(n)
        },
        "isApplicationInstalled" in navigator && "onloadcssdefined" in n && n.onloadcssdefined(o)
    } /* ]]> */
    </script>
    <script>
    // <![CDATA[
    onloadCSS(loadCss('https://assets.jimstatic.com/web_oldtemplate.css.484168258c63bd4f69a74e0370dc7ab9.css'), function() {
        this.id = 'jimdo_web_css';
    });
    // ]]>
    </script>
    <link href="https://assets.jimstatic.com/web_oldtemplate.css.484168258c63bd4f69a74e0370dc7ab9.css" rel="preload" as="style"/>
    <noscript>
        <link href="https://assets.jimstatic.com/web_oldtemplate.css.484168258c63bd4f69a74e0370dc7ab9.css" rel="stylesheet"/>
    </noscript>
    <script>
    //<![CDATA[
    var jimdoData = {
        "isTestserver": false,
        "isLcJimdoCom": false,
        "isJimdoHelpCenter": false,
        "isProtectedPage": false,
        "cstok": "",
        "cacheJsKey": "dc04b44e71947b5963ce6fc1404a2bb2ea23e742",
        "cacheCssKey": "dc04b44e71947b5963ce6fc1404a2bb2ea23e742",
        "cdnUrl": "https:\/\/assets.jimstatic.com\/",
        "minUrl": "https:\/\/assets.jimstatic.com\/app\/cdn\/min\/file\/",
        "authUrl": "https:\/\/a.jimdo.com\/",
        "webPath": "https:\/\/www.npokokoro.jp\/",
        "appUrl": "https:\/\/a.jimdo.com\/",
        "cmsLanguage": "ja_JP",
        "isFreePackage": false,
        "mobile": false,
        "isDevkitTemplateUsed": false,
        "isTemplateResponsive": false,
        "websiteId": "s1c71c378b473a4b7",
        "pageId": 912164772,
        "packageId": 2,
        "shop": {
            "deliveryTimeTexts": {
                "1": "\u304a\u5c4a\u3051\u65e5\u6570\uff1a1~3\u65e5",
                "2": "\u304a\u5c4a\u3051\u65e5\u6570\uff1a3~5\u65e5",
                "3": "\u304a\u5c4a\u3051\u65e5\u6570\uff1a5~8\u65e5"
            },
            "checkoutButtonText": "\u8cfc\u5165",
            "isReady": false,
            "currencyFormat": {
                "pattern": "\u00a4#,##0",
                "convertedPattern": "$#,##0",
                "symbols": {
                    "GROUPING_SEPARATOR": ",",
                    "DECIMAL_SEPARATOR": ".",
                    "CURRENCY_SYMBOL": "\uffe5"
                }
            },
            "currencyLocale": "ja_JP"
        },
        "tr": {
            "gmap": {
                "searchNotFound": "\u5165\u529b\u3055\u308c\u305f\u4f4f\u6240\u306f\u5b58\u5728\u3057\u306a\u3044\u304b\u3001\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002",
                "routeNotFound": "\u30eb\u30fc\u30c8\u304c\u8a08\u7b97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u76ee\u7684\u5730\u304c\u9060\u3059\u304e\u308b\u304b\u660e\u78ba\u3067\u306f\u306a\u3044\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002"
            },
            "shop": {
                "checkoutSubmit": {
                    "next": "\u6b21\u3078",
                    "wait": "\u304a\u5f85\u3061\u304f\u3060\u3055\u3044"
                },
                "paypalError": "\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u518d\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002",
                "cartBar": "\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0\u30ab\u30fc\u30c8\u3092\u78ba\u8a8d",
                "maintenance": "\u7533\u3057\u8a33\u3054\u3056\u3044\u307e\u305b\u3093\u3001\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u4e2d\u306e\u305f\u3081\u4e00\u6642\u7684\u306b\u30b7\u30e7\u30c3\u30d7\u304c\u5229\u7528\u3067\u304d\u307e\u305b\u3093\u3002\u3054\u8ff7\u60d1\u3092\u304a\u304b\u3051\u3057\u7533\u3057\u8a33\u3054\u3056\u3044\u307e\u305b\u3093\u304c\u3001\u304a\u6642\u9593\u3092\u3042\u3051\u3066\u518d\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002",
                "addToCartOverlay": {
                    "productInsertedText": "\u30ab\u30fc\u30c8\u306b\u5546\u54c1\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f",
                    "continueShoppingText": "\u8cb7\u3044\u7269\u3092\u7d9a\u3051\u308b",
                    "reloadPageText": "\u66f4\u65b0"
                },
                "notReadyText": "\u3053\u3061\u3089\u306e\u30b7\u30e7\u30c3\u30d7\u306f\u73fe\u5728\u6e96\u5099\u4e2d\u306e\u305f\u3081\u3054\u5229\u7528\u3044\u305f\u3060\u3051\u307e\u305b\u3093\u3002\u30b7\u30e7\u30c3\u30d7\u30aa\u30fc\u30ca\u30fc\u306f\u4ee5\u4e0b\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002https:\/\/help.jimdo.com\/hc\/ja\/articles\/115005521583",
                "numLeftText": "\u73fe\u5728\u3053\u306e\u5546\u54c1\u306f {:num} \u307e\u3067\u8cfc\u5165\u3067\u304d\u307e\u3059\u3002",
                "oneLeftText": "\u3053\u306e\u5546\u54c1\u306e\u5728\u5eab\u306f\u6b8b\u308a1\u70b9\u3067\u3059"
            },
            "common": {
                "timeout": "\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3044\u305f\u3057\u307e\u3057\u305f\u3002\u5f8c\u307b\u3069\u518d\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002"
            },
            "form": {
                "badRequest": "\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5f8c\u307b\u3069\u6539\u3081\u3066\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002"
            }
        },
        "jQuery": "jimdoGen002",
        "isJimdoMobileApp": false,
        "bgConfig": null,
        "bgFullscreen": null,
        "responsiveBreakpointLandscape": 767,
        "responsiveBreakpointPortrait": 480,
        "copyableHeadlineLinks": false,
        "tocGeneration": false,
        "googlemapsConsoleKey": false,
        "loggingForAnalytics": false,
        "loggingForPredefinedPages": false,
        "isFacebookPixelIdEnabled": false,
        "userAccountId": "0c3325d1-6b0b-446f-bc3b-e47d8fbb0d02",
        "dmp": {
            "typesquareFontApiKey": "4L6CCYWjET8%3D",
            "typesquareFontApiScriptUrl": "\/\/code.typesquare.com\/static\/4L6CCYWjET8%253D\/ts105.js",
            "typesquareFontsAvailable": true
        }
    };
    // ]]>
    </script>

    <script type="text/javascript">
    window.CKIES_OPTIN = true;
    </script>
    <script type="text/javascript">
    if (document.cookie.indexOf('ga-disable-UA-24230777-25') != -1 || !window.CookieControl.isCookieAllowed('ga') || !window.CookieControl.isCookieAllowed('jimdo_analytics')) {
        window['ga-disable-UA-24230777-25'] = true;
    }
    </script>
    <script>
    (function(window) {
        'use strict';
        var regBuff = window.__regModuleBuffer = [];
        var regModuleBuffer = function() {
            var args = [].slice.call(arguments);
            regBuff.push(args);
        };
        if (!window.regModule) {
            window.regModule = regModuleBuffer;
        }
    })(window);
    </script>
    <script src="https://assets.jimstatic.com/web.js.12719f3724127512fa9f.js" async="true"></script>

</head>
<body class="body cc-page cc-page-index cc-indexpage cc-pagemode-default cc-content-parent" id="page-912164772">

    <div id="cc-inner" class="cc-content-parent">
        <div id="cc-tp-padding-container" class="cc-content-parent">
            <div id="cc-tp-container" class="cc-content-parent">

                <div id="cc-tp-header">

                </div>

                <div id="cc-tp-wrapper">

                    <div id="cc-tp-navigation">
                        <div id="cc-tp-nav-top"></div>
                        <div class="cc-tp-gutter">
                            <div data-container="navigation">
                                <div class="j-nav-variant-standard">
                                    <ul id="mainNav1" class="mainNav1">
                                        <li id="cc-nav-view-912164772">
                                          <a href="https://poonh.github.io/esas_DC/" class="current level_1">
<!--index page begins-->
                                                <span>HOME</span>
                                            </a>
                                        </li>
                                        <li id="cc-nav-view-912164772">
                                            <a href="https://poonh.github.io/esas_DC/filter_SP.html" class="current level_1"> <!-- target="_blank"-->
                                                <span>Filtering for Soft Protons</span>
                                            </a>
                                        </li>
                                        <li id="cc-nav-view-912164772">
                                            <a href="https://poonh.github.io/esas_DC/anol_ccd.html" class="current level_1">
                                                <span>Anomalous CCD Check</span>
                                            </a>
                                        </li>
                                        <li id="cc-nav-view-912164772">
                                            <a href="https://poonh.github.io/esas_DC/cheese.html" class="current level_1">
                                                <span>Masking Point Sources (Cheese)</span>
                                            </a>
                                        </li>
                                       <li id="cc-nav-view-912164772">
                                            <a href="https://poonh.github.io/esas_DC/fovspecimage.html" class="current level_1">
                                                <span>FOV Spectrum and Image</span>
                                            </a>
                                       </li>
                                       <li id="cc-nav-view-912164772">
                                            <a href="https://poonh.github.io/esas_DC/residual_sp.html" class="current level_1">
                                                <span>Checking for residual soft proton flares</span>
                                            </a>
                                       </li>
                                       <li id="cc-nav-view-912164772">
                                            <a href="https://poonh.github.io/esas_DC/swcx.html" class="current level_1">
                                                <span>Checking for SWCX </span>
                                            </a>
                                       </li>
                                       <li id="cc-nav-view-912164772">
                                            <a href="https://poonh.github.io/esas_DC/EP_vs_EW.html" class="current level_1">
                                                <span>Emission Peak vs. Emission-weighted Centre</span>
                                            </a>
                                       </li>
                                       <li id="cc-nav-view-912164772">
                                            <a href="https://poonh.github.io/esas_DC/spectral_fit1.html" class="current level_1">
                                                <span>Spectral Fit1</span>
                                            </a>
                                        </li>	

                                       <li id="cc-nav-view-912164772">
                                            <a href="https://poonh.github.io/esas_DC/spectral_fit2.html" class="current level_1">
                                                <span>Spectral Fit2</span>
                                            </a>
                                        </li>	

                                       <li id="cc-nav-view-912164772">
                                            <a href="https://poonh.github.io/esas_DC/luminosity_cal.html" class="current level_1">
                                                <span>Luminosity Calculation</span>
                                            </a>
                                        </li>	
				   
                                       <li id="cc-nav-view-912164772">
                                            <a href="https://poonh.github.io/esas_DC/matheqn.html" class="current level_1">
                                                <span>Including math eqns in GitHub</span>
                                            </a>
                                        </li>
					   <li id="cc-nav-view-912164772">
                                            <a href="https://poonh.github.io/esas_DC/about_me.html" class="current level_1">                                                                        <span>About Me</span>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
<!--index page ends-->
                        <div id="cc-tp-nav-btm"></div>
                    </div>
	
                    <div id="cc-tp-sidebar">
                        <div id="cc-tp-sidebar-top"></div>
                        <div class="cc-tp-gutter">
                            <div data-container="sidebar">
                                <div id="cc-matrix-1112072072">
                                    <div id="cc-m-11549662272" class="j-module n j-text ">
                                      <p style="text-align: center;">

                                      <p style="text-align: center;">
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="cc-tp-sidebar-btm"></div>
                    </div>

                </div>

                <div id="cc-tp-content" class="cc-content-parent">
                    <div id="cc-tp-content-top"></div>
                    <div class="cc-tp-gutter cc-content-parent">
                        <div id="content_area" data-container="content">
                            <div id="content_start"></div>

                            <div id="cc-matrix-1112072272">
                                <div id="cc-m-4981642472" class="j-module n j-header ">
                                    <h1 class="" id="cc-m-header-4981642472">Anomalous CCD Check
</h1>
                                </div>
                                <div id="cc-m-4981638072" class="j-module n j-textWithImage ">
                                    <figure class="cc-imagewrapper cc-m-image-align-1">
                                       
                                     

                                    </figure>
                                    <div>
                                        <div id="cc-m-textwithimage-4981638072" data-name="text" data-action="text" class="cc-m-textwithimage-inline-rte">


<!--
insert begins
<!--
insert begins
-->



<!--
-->



<!--
-->



<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: right;">
</br>

</br>
 <div style="text-align: right;">
</br>
Last Updated:2023/05/17
</div>
</align right>
</br>

</br>
Source: MCXC J0106.8+0103
</br>
Observation ID: 0762870601  
</br>
SAS Version: 19.0.0
</br>
Python version: 3
</br>
csh is used
</br>

</br>
In this chapter, I am going to show you how to determine whether a ccd chip is anomalous. Everything you need is the file from the previous chapter,
<a href="https://poonh.github.io/esas_DC/filter_SP.zip" class="current level_1" target="_blank">
</br>
filter_sp.zip
</a>.
</br>

</br>
Remember right after running <i>mos-filter</i>, you get a file called <i>command.csh</i>, which contains anomalous ccd chip information. I renamed it to <i>esas_products/mosproblemccd.txt</i>. Open it and you see the following:
</br>

<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left; color:red">
<red>
</br>
<i>cat mosproblemccd.txt</i>
</span>
</red>
</br>

<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left; color:black">
<black>
</br>
<i># Limit=1.0 CCD=2 Hardness=4.472 Uncertainty=0.825 
</br>
# Limit=1.0 CCD=3 Hardness=0.000 Uncertainty=0.000 **** 
</br>
# Limit=3.4 CCD=4 Hardness=2.625 Uncertainty=0.630 #### 
</br>
# Limit=3 CCD=5 Hardness=4.957 Uncertainty=0.801 
</br>
# Limit=1.0 CCD=6 Hardness=0.000 Uncertainty=0.000 **** 
</br>
# Limit=1.0 CCD=7 Hardness=6.846 Uncertainty=1.437 
</br>
# Limit=1.0 CCD=2 Hardness=3.295 Uncertainty=0.482 
</br>
# Limit=1.0 CCD=3 Hardness=4.182 Uncertainty=0.810 
</br>
# Limit=1.0 CCD=4 Hardness=4.795 Uncertainty=0.844 
</br>
# Limit=3.5 CCD=5 Hardness=0.784 Uncertainty=0.073 #### 
</br>
# Limit=1.0 CCD=6 Hardness=5.708 Uncertainty=1.263 
</br>
# Limit=1.0 CCD=7 Hardness=4.267 Uncertainty=0.707</i>
</span>
</black>
</br>

</br>
This is the hardness ratio ([2.5-5.0]/[0.5-0.8]) of the lightcuves of <i>mos1</i> and <i>mos2</i>. If the ratio is too low that means ccd chip anomalies are detected and that ccd chip has to be excluded in subsequent analysis. In this example, <i>mos1</i> ccd4 and <i>mos2</i> ccd5 are anomalous. <i>mos1</i> ccd3 and ccd6 are missing. We will check further to confirm ccd anomalies.
</br>

</br>
To reproduce the above file, in <i>src/filter_sp_script.py</i>:
</br>

<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left; color:black">
<black>
</br>
  <i>a.problemccdcheck() #parameters omitted</i>
</span>
</black>
</br>

</br>
Choose the ccd you want(<i>mos1S001</i> or <i>mos2S002</i>), and you see the following on the screen, a file called <i>mos2S002_problemccd.txt</i> is also written:
</br>

<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left; color:black">
<black>
</br>
 <i>mos2S002
</br>
 ccd&nbsp;  || total&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| total&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| hardness
</br>
 chip || events(LE) || events(HE) || ratio
</br>
=============================================
</br>
2 61 201 3.3
</br>
3 33 138 4.18
</br>
4 39 187 4.79
</br>
5 264 207 0.784
</br>
6 24 137 5.71
</br>
7 45 192 4.27</i>
</span>
</black>
</br>

</br>
The input file for this is <i>mos1S001-corn.fits</i>, the event list which contains corner events only, extracted from <i>mos1S001-clean.fits</i>. The corner events do not have anything from the FOV and reflect intrinsic anormalies of the ccd chips. If a ccd chip(1st column) is normal, the [counts in the high energy range (2nd column)]/([counts in the low energy range (3rd column)] should have a certain ratio (4th column). If it is too low, that means the ccd chip exhibits higher-than-usual counts in the low energy range and has to be discarded for further analysis. We will see this issue again in
<a href="https://poonh.github.io/esas_DC/fovspecimage.html" class="current level_1" target="_blank">
</br>
FOV spectrum and image
</a>.
</br>

</br>
The program extracts two event lists for ccd chip 2-7, one in [0.5 – 0.8] keV and the other [2.5 – 5.0] keV. The hardness ratio is the ratio of the number of events in the lists. The product names produced by the script are <i>mos2S002_Xccd_0.5_0.8.fits</i> and <i>mos2S002_Xccd_0.5_0.8.fits</i>, X stands for the ccd chip number.
</br>

</br>
Now let's extract ccd chip 7 of <i>mos2S002</i> manually. For the following, just change <i>CCDNR</i>, <i>PI</i>, and <i>filteredset</i> for a different ccd, energy range and filtered event list name, respectively.
</br>

</br>

<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left; color:red">
  <i>evselect table=mos2S002-corn.fits withfilteredset=yes expression=' (PATTERN<=12)&&((FLAG & 0x766a0763) == 0)&&
</span>
<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left; color:blue"> (CCDNR==7)</span>
<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left; color:red"> &&</span>
<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left; color:blue">(PI in [2500:5000])</span>
<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left; color:red"> ' filtertype=expression </span>
<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left; color:blue">filteredset=mos2S002_7ccd_2.5_5.0.fits</i></span>
</br>
  
</br>

<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left; color:red">
  <i>evselect table=mos2S002-corn.fits withfilteredset=yes expression=' (PATTERN<=12)&&((FLAG & 0x766a0763) == 0)&&
</span>
<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left; color:blue"> (CCDNR==7)</span>
<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left; color:red"> &&</span>
<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left; color:blue">(PI in [500:800])</span>
<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left; color:red"> ' filtertype=expression </span>
<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left; color:blue">filteredset=mos2S002_7ccd_0.5_0.8.fits</i></span>


</br>
 
<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left">
</br>
Now open the two newly produced files and check for the number of events (i.e. number of rows) for the extension <i>EVENTS</i>:
</br>
 
<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left; color:red">
<red>
</br>
<i>fv mos2S002_7ccd_0.5_0.8.fits &
</br>
fv mos2S002_7ccd_2.5_5.0.fits &</i> 
</span>
</red>
</br>
 
</br>
For the low energy file, it has 45 rows while the high energy one has 192 rows, so the hardness ratio is 192/45 = 4.27 for <i>mos2</i> ccd7. If you check <i>esas_products/mosproblemccd.txt</i>, you find the same value. A ccd chip with a low hardness ratio means it has higher-than-usual counts in the low energy range. You can see this both in the spectrum and also image. Now let's take a look at the image:
</br>

</br>
In <i>src/sp_filter_script.py</i>, you do the following to extract the corner images in both energy ranges: 
</br>

<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left; color:black">
<black>
</br>
  <i> a.CornImage() #parameters omitted </i>
</span>
</black>
</br>

</br>
The files produced are <i>mos2S002-corn-image-0.5-0.8.fits</i> and <i>mos2S002-corn-image-2.5-5.0.fits</i>. Here are how they look:
</br>

<a href="a href="https://poonh.github.io/esas_DC/figs/anol_ccd_check_mos2S002-corn-image-0.5-0.8.png" class="current level_1" target="_blank"" class="current level_1" target="_blank">
<img border="0" data-original-height="480" data-original-width="640" height="533" width="533" src="https://poonh.github.io/esas_DC/figs/anol_ccd_check_mos2S002-corn-image-0.5-0.8.png"></a>
</br>

</br>

<a href="a href="https://poonh.github.io/esas_DC/figs/anol_ccd_check_mos2S002-corn-image-2.5-5.0.png" class="current level_1" target="_blank"" class="current level_1" target="_blank">
<img border="0" data-original-height="480" data-original-width="640" height="533" width="533" src="https://poonh.github.io/esas_DC/figs/anol_ccd_check_mos2S002-corn-image-2.5-5.0.png"></a></br>

</br>
 <div style="text-align: center;">
</br>
Fig.1 Top panel: <i>mos2S002-corn-image-0.5-0.8.fits</i>. Bottom panel: <i>mos2S002-corn-image-2.5-5.0.fits</i>. Top left is chip 5.
</div>
</align>
</br>

</br>
You see for <i>mos2S002-corn-image-0.5-0.8.fits</i>,chip 5 (top left) obviously have higher counts than other ccd chips but not <i>mos2S002-corn-image-2.5-5.0.fits</i>.
</br>

</br>
<i>mos1</i> corner images:
</br>

<a href="a href="https://poonh.github.io/esas_DC/figs/anol_ccd_check_mos1S001-corn-image-0.5-0.8.png" class="current level_1" target="_blank"" class="current level_1" target="_blank">
<img border="0" data-original-height="480" data-original-width="640" height="533" width="533" src="https://poonh.github.io/esas_DC/figs/anol_ccd_check_mos1S001-corn-image-0.5-0.8.png"></a>
</br>

</br>

<a href="a href="https://poonh.github.io/esas_DC/figs/anol_ccd_check_mos1S001-corn-image-2.5-5.0.png" class="current level_1" target="_blank"" class="current level_1" target="_blank">
<img border="0" data-original-height="480" data-original-width="640" height="533" width="533" src="https://poonh.github.io/esas_DC/figs/anol_ccd_check_mos1S001-corn-image-2.5-5.0.png"></a></br>

</br>
 <div style="text-align: center;">
</br>
Fig.2 Top panel: <i>mos1S001-corn-image-0.5-0.8.fits</i>. Bottom panel: <i>mos1S001-corn-image-2.5-5.0.fits</i>. Top right is chip 4.
</div>
</align>
</br>

</br>
Here for <i>mos1S001-corn-image-0.5-0.8.fits</i>, chip 4 (top right) does not show higher counts than other ccd chips. I will keep it.
</br>

</br>
Finally, we need to extract the result and write it to <i>InputFiles/goodccdlist_mos1(mos2).txt</i>, which will be used in
<a href="https://poonh.github.io/esas_DC/fovspecimage.html" class="current level_1" target="_blank">
</br>
FOV spectrum and image
</a>.
</br>

</br>
Now in <i>src/sp_filter_script.py</i>, you do: 
</br>

<span style="font-family: arial; sans-serif; font-size: 12pt; text-align: left; color:red">
<red>
</br>
<i> a.write_ccd_anol("mosproblemccd.txt")</i>
</span>
</red>
</br>

</br>
This rewrites the result from <i>mosproblemccd.txt</i> to <i>InputFiles/goodccdlist_mos1(mos2).txt</i>. The text files are shown in the terminal if they are produced successfully. For good ccd chips, I set the value = 1, otherwise 0. I manually set <i>mos1</i> ccd4 as 1. These two text files would be used for <i>mos-spectra</i> (the command for spectrum production). Note that <i>mosproblemccd.txt</i> may be different for different SAS versions, and you may need to modify the code. 
</span>
<!--
<!--
<!--
insert ends
-->

					    
</style></span></p><p class="MsoNormal" style="line-height: 16.866667px;"><span lang="EN-GB" style="font-size: 12pt; line-height: 18.4px;">&nbsp;</span></p>
      
                              

   
 


</body>
</html>

 

 

  

    
 

 
</head>


</html>
